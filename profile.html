<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile | Valiant Vision</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Lora:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family:'Lora', serif; margin:0; background:#f4f4f7; display:flex; justify-content:center; padding:30px; }
  .profile-card { background:#fff; border-radius:18px; padding:30px; width:100%; max-width:700px; box-shadow:0 10px 30px rgba(0,0,0,.08); position:relative; }
  .profile-header { display:flex; align-items:center; justify-content:space-between; }
  .profile-img { width:100px; height:100px; border-radius:50%; background:#ddd; cursor:pointer; object-fit:cover; }
  .edit-btn { font-size:1.2rem; cursor:pointer; }
  .profile-details { margin-top:20px; }
  .profile-details div { margin-bottom:12px; font-size:1rem; }
  .badge { margin-top:20px; display:flex; align-items:center; font-weight:600; color:#4300b9; }
  .badge img { width:50px; height:50px; margin-right:10px; border-radius:12px; }
</style>
</head>
<body>

<div class="profile-card">
  <div class="profile-header">
    <img id="profileImg" class="profile-img" src="" alt="Profile Image">
    <span class="edit-btn" title="Edit Profile">✏️</span>
  </div>

  <div class="profile-details" id="profileDetails"></div>

  <div class="badge" id="badge" style="display:none;">
    <img id="badgeImage" src="">
    Subscriber Badge
  </div>
</div>

<input type="file" id="profileInput" accept="image/*" style="display:none;">

<script>
let user = JSON.parse(localStorage.getItem("userProfile"));
if(!user) { alert("No data found!"); window.location.href="subscribe.html"; }

function renderProfile(){
  document.getElementById("profileDetails").innerHTML = `
    <div><strong>Name:</strong> ${user.name}</div>
    <div><strong>Email:</strong> ${user.email}</div>
    <div><strong>Phone:</strong> ${user.phone}</div>
    <div><strong>State:</strong> ${user.state}</div>
    <div><strong>Country:</strong> ${user.country}</div>
    <div><strong>Class:</strong> ${user.class}</div>
    <div><strong>School:</strong> ${user.school}</div>
    <div><strong>Skills:</strong> ${user.skills}</div>
    <div><strong>Hobbies:</strong> ${user.hobbies}</div>
    <div><strong>Achievements:</strong> ${user.achievements}</div>
  `;

  document.getElementById("profileImg").src = user.profileImage || "https://i.pravatar.cc/100";
  
  if(user.badge && user.badgeImage){
    document.getElementById("badge").style.display="flex";
    document.getElementById("badgeImage").src = user.badgeImage;
  }
}

renderProfile();

// Edit button to update profile info
document.querySelector(".edit-btn").addEventListener("click", () => {
  const newName = prompt("Enter Name:", user.name);
  if(newName) { user.name = newName; localStorage.setItem("userProfile", JSON.stringify(user)); renderProfile(); }
});

// Change profile image
document.getElementById("profileImg").addEventListener("click", () => {
  const input = document.getElementById("profileInput");
  input.click();
});

document.getElementById("profileInput").addEventListener("change", (e) => {
  const reader = new FileReader();
  reader.onload = () => {
    user.profileImage = reader.result;
    localStorage.setItem("userProfile", JSON.stringify(user));
    renderProfile();
  };
  reader.readAsDataURL(e.target.files[0]);
});
</script>

</body>
</html>
